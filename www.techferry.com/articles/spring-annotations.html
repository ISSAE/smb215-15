<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Spring Annotations</title>  
    <script src="../js/jquery-1.5.1.min.js"></script>
    <script src="../js/shCore.js"></script>
    <script src="../js/shBrushJava.js"></script>
    <link rel="StyleSheet" href="../css/redmond/jquery-ui-1.8.14.custom.css" type="text/css" /> 
    <link href="../css/shCore.css" rel="stylesheet" type="text/css" />
	<link href="../css/shThemeDefault.css" rel="stylesheet" type="text/css" />
	<link href="../css/article.css" rel="stylesheet" type="text/css" />
	<script src="../js/jquery.validationEngine-en.js" type="text/javascript"></script>
	<script src="../js/jquery.validationEngine.js" type="text/javascript"></script>
	<link href="../css/validation.css" rel="stylesheet" type="text/css" />
	<link rel="Shortcut Icon" href="../images/favicon.ico" type="image/x-icon" /> 

<meta name="keywords" content="Spring Annotations Tutorial, Spring MVC annotations, Spring Security Annotation, Spring 3 annotation - code examples"  />
<meta name="keyphrases" content="Spring Annotations Tutorial, Spring MVC annotations, Spring Security Annotation, Spring 3 annotation - code examples"  />
<meta name="description" content="Spring Annotations: This tutorial is part 1 of 5-part tutorial on JEE annotations. 
It contains usage instructions, code examples and tips on spring annotations."  />
	
	<script type="text/javascript">
     SyntaxHighlighter.all()
	</script>
	<script>
	    $(document).ready(function(){
	    	var hc = $($.ajax({url: "header.html", async: false}).responseText);
	    	$('#header').html(hc);
            var fc = $($.ajax({url: "footer.html", async: false}).responseText);
            $('#footer').html(fc);
	    });
    </script>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27684656-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body>
<center>
<table width="1000px"><tr><td>
<div id="header"></div>

<div class="topbar">
<a href="http://www.techferry.com/" title="TechFerry: Your ferry to success">Home</a> 
&gt; <a href="index.html" title="TechFerry Articles">Articles</a>
&gt; <a href="spring-annotations.html" title="Spring Annotations">Spring Annotations</a>
</div>


<table align="right" width="290px">
<tr><td>
<a href="massively-scalable-applications.html" target="_blank" title="Massively Scalable Applications"><img alt="Massively Scalable Applications"  title="Massively Scalable Applications"  style="margin: 27px 0 0 20px;" src="images/Massively-Scalable-Application.png"></img></a>

<!--
		
		<div style="background-color:#e0e0e0; height:527px;margin: 27px 0 0 20px;border:1px solid #e0e0e0">
                  <p style='margin:24px 0 0 0'>
                   <center>
                      <a title="NodeJS vs J2EE Stack A Performance Comparison Study"
                       href="http://www.techferry.com/eBooks/NodeJS-vs-J2EE-Stack.html" target="_blank"> 
                       <strong>
                       <span style="font-size:27px; color: #bf0000;">NodeJS vs J2EE Stack<br></span>
                       </strong> <br/>
                       <span style="color:blue;display:inline-block">A Performance Comparison Study</span><br /> 
                       </a>
                    <br/> 
                  <a href="http://www.techferry.com/eBooks/NodeJS-vs-J2EE-Stack.html" target="_blank"> 
                     <img src="../eBooks/images/NodeBook.png" alt="" title="NodeJS vs J2EE Stack A Performance Comparison Study" height="240"/></a>
                    </center>
                   </p> 
                   
                 <p style='margin:24px 0 0 0'>
<a title="NodeJS vs J2EE Stack A Performance Comparison Study"
                       href="http://www.techferry.com/eBooks/NodeJS-vs-J2EE-Stack.html" target="_blank"> 
                      <strong> <span style="color:#bf0000;display:inline-block">
            		<em> &nbsp; >>  Download 
            		<span style="color:#000000;display:inline-block">your FREE Copy&#8230;</span>
            		</em>
                	</span></strong>
                	</a> 
                  </p>
                  
                  <p style="background-color:lightgrey;padding:3px 0 3px 0;">
									<strong><font color="#bf0000" size="3"> &nbsp; More eBooks:</font></strong>
					</p>
								<ul  style="line-height: 1.5;">
									<li><font size="3">
										<a style="color:blue" href="http://www.techferry.com/eBooks/Usability-Beyond-RIA.html" target="_blank">Usability - Beyond RIA</a></font></li>
								</ul>
      </div>
--></td></tr>
</table>

<h2>Part 1: Spring Annotations</h2>

<p align="justify">
This tutorial is part 1 of 5-part tutorial on JEE annotations. 
We recommend that you read <a href="JEE-annotations.html#Prerequisite">Prerequisite</a> section first, 
review the <a href="JEE-annotations.html#abstract">abstract</a> and 
<a href="JEE-annotations.html#exampleApp">Example Application</a> to understand the context. 
You can also jump to other parts by clicking on the links below.
</p>

    <div class="ui-widget">
    <table class="ui-widget ui-widget-content" cellspacing="0" cellpadding="5">
        <thead>
            <tr class="ui-widget-header ">
                <th>Annotation Tutorial: Contents</th>
            </tr>
        </thead>
        <tbody>
        <tr><td>
        <a href="JEE-annotations.html" title="JEE Annotations"> JEE Annotations </a> &nbsp;
        <font size="-2">( 
                <a href="JEE-annotations.html#abstract"> Abstract </a> &nbsp;
                <a href="JEE-annotations.html#exampleApp"> Example Application </a> &nbsp;
                <a href="JEE-annotations.html#references"> References </a> )
        </font>
        <ul style="margin-top:7;margin-bottom:7">
        	<li><a href="spring-annotations.html" title="Spring Annotations">Part 1: Spring Annotations </a></li>
        	<li><a href="hibernate-jpa-annotations.html" title="Hibernate - JPA Annotations">Part 2: Hibernate - JPA Annotations </a></li>
        	<li><a href="RESTful-web-services-JAX-RS-annotations.html" title="RESTful Web Service - JAX-RS Annotations">Part 3: RESTful Web Service - JAX-RS Annotations </a></li>
        	<li><a href="jaxb-annotations.html" title="JAXB Annotations">Part 4: JAXB Annotations </a></li>
        	<li><a href="spring-jUnit-annotations.html" title="Spring - jUnit Annotations">Part 5: Spring - jUnit Annotations </a></li>
        </ul>     
        </td></tr>
        </tbody>
    </table>
</div>

<h2>Spring Annotations: Contents:</h2>
<table border="1" style="background-color:#e0e0e0" cellpadding="3">
<tr><th>Annotation</th><th>Package Detail/Import statement </th></tr>
<tr><td><a href="spring-annotations.html#Service" title="@Service Spring Annotation">@Service</a></td><td>import org.springframework.stereotype.Service;</td></tr>
<tr><td><a href="spring-annotations.html#Repository" title="@Repository Spring Annotation">@Repository</a></td><td>import org.springframework.stereotype.Repository;</td></tr>
<tr><td><a href="spring-annotations.html#Component" title="@Component Spring Annotation">@Component</a></td><td>import org.springframework.stereotype.Component;</td></tr>
<tr><td><a href="spring-annotations.html#Autowired" title="@Autowired Spring Annotation">@Autowired</a></td><td>import org.springframework.beans.factory.annotation.Autowired;</td></tr>
<tr><td><a href="spring-annotations.html#Transactional" title="@Transactional Spring Annotation">@Transactional</a></td><td>import org.springframework.transaction.annotation.Transactional;</td></tr>
<tr><td><a href="spring-annotations.html#Scope" title="@Scope Spring Annotation">@Scope</a></td><td>import org.springframework.context.annotation.Scope;</td></tr>
<tr><td colspan="2" align="center"><a href="spring-annotations.html#MVC"  title="Spring MVC Annotations">Spring MVC Annotations</a></td></tr>
<tr><td><a href="spring-annotations.html#Controller" title="@Controller Spring Annotation">@Controller</a></td><td>import org.springframework.stereotype.Controller;</td></tr>
<tr><td><a href="spring-annotations.html#RequestMapping" title="@RequestMapping Spring Annotation">@RequestMapping</a></td><td>import org.springframework.web.bind.annotation.RequestMapping;</td></tr>
<tr><td><a href="spring-annotations.html#PathVariable" title="@PathVariable Spring Annotation">@PathVariable</a></td><td>import org.springframework.web.bind.annotation.PathVariable;</td></tr>
<tr><td><a href="spring-annotations.html#RequestParam" title="@RequestParam Spring Annotation">@RequestParam</a></td><td>import org.springframework.web.bind.annotation.RequestParam;</td></tr>
<tr><td><a href="spring-annotations.html#ModelAttribute" title="@ModelAttribute Spring Annotation">@ModelAttribute</a></td><td>import org.springframework.web.bind.annotation.ModelAttribute;</td></tr>
<tr><td><a href="spring-annotations.html#SessionAttributes" title="@SessionAttributes Spring Annotation">@SessionAttributes</a></td><td>import org.springframework.web.bind.annotation.SessionAttributes;</td></tr>
<tr><td colspan="2" align="center" title="Spring Security Annotations"><a href="spring-annotations.html#SpringSecurity">Spring Security Annotations</a></td></tr>
<tr><td><a href="spring-annotations.html#PreAuthorize" title="@PreAuthorize Spring Annotation">@PreAuthorize</a></td><td>import org.springframework.security.access.prepost.PreAuthorize;</td></tr>
</table>
<br/><br/>
For spring to process annotations, add the following lines in your application-context.xml file.
<pre>
	&lt;context:annotation-config /&gt;
	&lt;context:component-scan base-package="...specify your package name..." /&gt;
</pre>
<table class="tips"><tr><td>
<img src="images/tips.gif" alt="Spring Annotation Tip" title="Spring Annotation Tip" /> </td><td>
Spring supports both Annotation based and XML based configurations. You can even mix them together. Annotation injection is performed before XML injection, thus the latter configuration will
override the former for properties wired through both approaches.
</td></tr></table>

<a name="Service" ></a>
<h3 title="Spring Annotation @Service">@Service</h3>

Annotate all your service classes with @Service. All your business logic should be in Service classes.

<pre class="brush: java;toolbar: false;">
@Service
public class CompanyServiceImpl implements CompanyService {
...
}
</pre>

<a name="Repository" ></a>
<h3 title="Spring Annotation @Repository">@Repository</h3>
Annotate all your DAO classes with @Repository. All your database access logic should be in DAO classes.
<pre class="brush: java;toolbar: false;">
@Repository
public class CompanyDAOImpl implements CompanyDAO {
...
}
</pre>

<a name="Component" ></a>
<h3 title="Spring Annotation @Component">@Component</h3>
Annotate your other components (for example REST resource classes) with @Component.

<pre class="brush: java;toolbar: false;">
@Component
public class ContactResource {
...
}
</pre>

@Component is a generic stereotype for any Spring-managed component. @Repository, @Service,
and @Controller are specializations of @Component for more specific use cases, for example, in the
persistence, service, and presentation layers, respectively.
<br/><br/>
<img src="images/SpringComponentAnnotations.jpg" alt="Spring Component Annotations" title="Spring Component Annotations"/>

<a name="Autowired" ></a>
<h3 title="Spring Annotation @Autowired">@Autowired</h3>
Let Spring auto-wire other beans into your classes using @Autowired annotation.
<br/><br/>
<pre class="brush: java;toolbar: false;">
@Service
public class CompanyServiceImpl implements CompanyService {

  @Autowired
  private CompanyDAO companyDAO;
  
  ...
}
</pre>

<table class="tips"><tr><td>
<img src="images/tips.gif" alt="Spring Annotation Tip" title="Spring Annotation Tip" /> </td><td>
Spring beans can be wired by name or by type. 
<ul>
<li>@Autowire by default is a type driven injection. 
@Qualifier spring annotation can be used to further fine-tune autowiring. </li>
<li>@Resource (javax.annotation.Resource) annotation can be used for wiring by name.</li>
</ul>
Beans that are themselves defined as a
collection or map type cannot be injected through @Autowired, because type matching is
not properly applicable to them. Use @Resource for such beans, referring to the specific
collection or map bean by unique name.
</td></tr></table>

  
<a name="Transactional" ></a>
<h3 title="Spring Annotation @Transactional">@Transactional</h3>
Configure your transactions with @Transactional spring annotation.
<pre class="brush: java;toolbar: false;">
@Service
public class CompanyServiceImpl implements CompanyService {

  @Autowired
  private CompanyDAO companyDAO;

  @Transactional
  public Company findByName(String name) {

    Company company = companyDAO.findByName(name);
    return company;
  }
  ...
}
</pre>

<table class="tips"><tr><td>
<img src="images/tips.gif" alt="Spring Annotation Tip" title="Spring Annotation Tip" /> </td><td>
To activate processing of Spring's @Transactional annotation, use
the &lt;tx:annotation-driven/&gt; element in your spring's configuration file.
</td></tr></table>
<br/>
The default @Transactional settings are as follows:
<ul>
<li>Propagation setting is PROPAGATION_REQUIRED.</li>
<li>Isolation level is ISOLATION_DEFAULT.</li>
<li>Transaction is read/write.</li>
<li>Transaction timeout defaults to the default timeout of the underlying transaction system, or to none if
timeouts are not supported.</li>
<li>Any RuntimeException triggers rollback, and any checked Exception does not.</li>
</ul>
These default settings can be changed using various properties of the @Transactional spring annotation.
<br/><br/>
<table class="tips"><tr><td>
<img src="images/tips.gif" alt="Spring Annotation Tip" title="Spring Annotation Tip" /> </td><td>
Specifying the @Transactional annotation on the bean class means 
that it applies to all applicable business methods of the class. 
Specifying the annotation on a method applies it to that method only. 
If the annotation is applied at both the class and the method level, 
the method value overrides if the two disagree.
</td></tr></table>


<a name="Scope" ></a>
<h3 title="Spring Annotation @Scope">@Scope</h3>
As with Spring-managed components in general, the default and most common scope for autodetected
components is singleton. To change this default behavior, use @Scope spring annotation. 

<pre class="brush: java;toolbar: false;">
@Component
@Scope("request")
public class ContactResource {
...
}
</pre>

Similarly, you can annotate your component with @Scope("prototype") for beans with prototype scopes.

<table class="tips"><tr><td>
<img src="images/tips.gif" alt="Spring Annotation Tip" title="Spring Annotation Tip" /> </td><td>
Please note that the dependencies are resolved at instantiation time. 
For prototype scope, it does NOT create a new instance at runtime more than once. 
It is only during instantiation that each bean is injected with a separate instance of prototype bean.
</td></tr></table>

<a name="MVC" ></a>
<h2> Spring MVC Annotations</h2>

<a name="Controller" ></a>
<h3 title="Spring Annotation @Controller">@Controller</h3>

Annotate your controller classes with @Controller.

<pre class="brush: java;toolbar: false;">
@Controller
public class CompanyController {
...
}
</pre>

<a name="RequestMapping" ></a>
<h3 title="Spring Annotation @RequestMapping">@RequestMapping</h3>

You use the @RequestMapping spring annotation to map URLs onto an entire
class or a particular handler method. Typically the class-level annotation maps a specific request path (or
path pattern) onto a form controller, with additional method-level annotations narrowing the primary
mapping.

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/company")
public class CompanyController {

  @Autowired
  private CompanyService companyService;
...
}
</pre>

<a name="PathVariable" ></a>
<h3 title="Spring Annotation @PathVariable">@PathVariable</h3>

You can use the @PathVariable spring annotation on a method argument to bind it to the
value of a URI template variable. In our example below, a request path of /company/techferry
will bind companyName variable with 'techferry' value.

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/company")
public class CompanyController {

  @Autowired
  private CompanyService companyService;

  @RequestMapping("{companyName}")
  public String getCompany(Map&lt;String, Object&gt; map, @PathVariable String companyName) {
    Company company = companyService.findByName(companyName);
    map.put("company", company);
    return "company";
  }
...
}
</pre>

<a name="RequestParam" ></a>
<h3 title="Spring Annotation @RequestParam">@RequestParam</h3>

You can bind request parameters to method variables using spring annotation @RequestParam.

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/company")
public class CompanyController {

  @Autowired
  private CompanyService companyService;

  @RequestMapping("/companyList")
  public String listCompanies(Map&lt;String, Object&gt; map, @RequestParam int pageNum) {
    map.put("pageNum", pageNum);
    map.put("companyList", companyService.listCompanies(pageNum));
    return "companyList";
  }
...
}
</pre>

Similarly, you can use spring annotation @RequestHeader to bind request headers.

<a name="ModelAttribute" ></a>
<h3 title="Spring Annotation @ModelAttribute">@ModelAttribute</h3>

An @ModelAttribute on a method argument indicates the argument should be retrieved from the
model. If not present in the model, the argument should be instantiated first and then added to the model.
Once present in the model, the argument's fields should be populated from all request parameters that
have matching names. This is known as data binding in Spring MVC, a very useful mechanism that saves
you from having to parse each form field individually.

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/company")
public class CompanyController {

  @Autowired
  private CompanyService companyService;

  @RequestMapping("/add")
  public String saveNewCompany(@ModelAttribute Company company) {
    companyService.add(company);
    return "redirect:" + company.getName();
  }
...
}
</pre>

<a name="SessionAttributes" ></a>
<h3 title="Spring Annotation @SessionAttributes">@SessionAttributes</h3>

@SessionAttributes spring annotation declares session attributes. This will typically list the names of model attributes 
which should be transparently stored in the session, serving as form-backing beans between subsequent requests.

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/company")
@SessionAttributes("company")
public class CompanyController {

  @Autowired
  private CompanyService companyService;
...
}
</pre>

@SessionAttribute works as follows:
<ul>
<li>@SessionAttribute is initialized when you put the corresponding attribute into model 
(either explicitly or using @ModelAttribute-annotated method).</li>
<li>@SessionAttribute is updated by the data from HTTP parameters when controller 
method with the corresponding model attribute in its signature is invoked.</li>
<li>@SessionAttributes are cleared when you call setComplete() 
on SessionStatus object passed into controller method as an argument.</li>
</ul>


The following listing illustrate these concepts. It is also an example for pre-populating Model objects. 

<pre class="brush: java;toolbar: false;">
@Controller
@RequestMapping("/owners/{ownerId}/pets/{petId}/edit")
@SessionAttributes("pet")
public class EditPetForm {

	@ModelAttribute("types")
	
	public Collection&lt;PetType&gt; populatePetTypes() {
		return this.clinic.getPetTypes();
	}
	
	@RequestMapping(method = RequestMethod.POST)
	public String processSubmit(@ModelAttribute("pet") Pet pet, BindingResult result, 
			SessionStatus status) {
		new PetValidator().validate(pet, result);
		if (result.hasErrors()) {
			return "petForm";
		}else {
			this.clinic.storePet(pet);
			status.setComplete();
			return "redirect:owner.do?ownerId=" + pet.getOwner().getId();
		}
	}
}
</pre>

<a name="SpringSecurity" ></a>
<h2> Spring Security Annotations </h2>
<a name="PreAuthorize" ></a>
<h3 title="Spring Annotation @PreAuthorize">@PreAuthorize</h3>
Using Spring Security @PreAuthorize annotation, you can authorize or deny a functionality. 
In our example below, only a user with Admin role has the access to delete a contact.
<pre class="brush: java;toolbar: false;">
  @Transactional
  @PreAuthorize("hasRole('ROLE_ADMIN')")
  public void removeContact(Integer id) {
    contactDAO.removeContact(id);
  }
</pre>
<h2>References:</h2>

<ol>
<li><a target="_blank" href="http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-annotation-config/" title="Spring Annotations">Spring Annotations</a>: http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-annotation-config </li>
<li><a target="_blank" href="http://static.springsource.org/spring/docs/current/spring-framework-reference/pdf/spring-framework-reference.pdf" title="Spring Framework Reference">Spring Framework Reference</a>: http://static.springsource.org/spring/docs/current/spring-framework-reference/pdf/spring-framework-reference.pdf</li>
</ol><br/>
<table width="85%" align="center"><tr>
<td width="33%" align="center"> <a href="JEE-annotations.html" title="JEE Annotations" style="text-decoration:none"><input type="button" value="JEE Annotations" style="width:250px" onclick="window.location.href='JEE-annotations.html'"/></a></td>
<td width="33%" align="center"><a href="spring-annotations.html" title="Spring Annotations" style="text-decoration:none"><input type="button" value="Spring Annotations" style="width:250px" onclick="window.location.href='spring-annotations.html'"/></a></td>
<td width="33%" align="center"><a href="hibernate-jpa-annotations.html" title="Hibernate Annotations" style="text-decoration:none"><input type="button" value="Hibernate JPA Annotations" style="width:250px" onclick="window.location.href='hibernate-jpa-annotations.html'"/></a></td>
</tr><tr>
<td width="33%" align="center"><a href="RESTful-web-services-JAX-RS-annotations.html" title="Jersey Annotations" style="text-decoration:none"><input type="button" value="REST - JAXRS Annotations" style="width:250px" onclick="window.location.href='RESTful-web-services-JAX-RS-annotations.html'"/></a></td>
<td width="33%" align="center"><a href="jaxb-annotations.html" title="JAXB Annotations" style="text-decoration:none"><input type="button" value="JAXB Annotations" style="width:250px" onclick="window.location.href='jaxb-annotations.html'"/></a></td>
<td width="33%" align="center"><a href="spring-jUnit-annotations.html" title="Spring jUnit Annotations" style="text-decoration:none"><input type="button" value="Spring jUnit Annotations" style="width:250px" onclick="window.location.href='spring-jUnit-annotations.html'"/></a></td>
</tr>
</table><br/>
<div id="footer"></div>
</td></tr></table>
</center>
<div id='pageshare' title="Share This With Your Friends">
	<div class='sbutton' id='gb'><script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script><fb:like layout="box_count" show_faces="false" font=""></fb:like></div>
	<div class='sbutton' id='gplusone'><script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script><g:plusone size="tall"></g:plusone></div>
	<div class='sbutton' id='su'><script src="http://www.stumbleupon.com/hostedbadge.php?s=5"></script></div>
	<div class='sbutton' id='rt'><a href="http://twitter.com/share" class="twitter-share-button"  data-count="vertical" >Tweet</a><script src='http://platform.twitter.com/widgets.js' type="text/javascript"></script></div>
	<div class='floatbutton' id='linkedin'><script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
	<script type="IN/Share" data-counter="top"></script></div>
</div>
</body>
</html>